<audio id="bgMusic" loop muted>
    <source src="https://www.dropbox.com/scl/fi/ybik0nc73k0wekrnke9oq/urike.mp3?rlkey=dnit3der6fo0u3ostc8jbps23&st=ck2tx4ay&dl=1" type="audio/mpeg">
</audio>

<button id="playButton">â–¶ Play Music</button>

<script>
    const audio = document.getElementById('bgMusic');
    const playButton = document.getElementById('playButton');

    function tryAutoplay() {
        audio.muted = false; // Unmute before playing
        const playPromise = audio.play();

        if (playPromise !== undefined) {
            playPromise.then(() => {
                console.log("Autoplay successful");
                playButton.style.display = "none"; // Hide play button if autoplay works
            }).catch(() => {
                console.log("Autoplay blocked, showing play button.");
                playButton.style.display = "block"; // Show play button if autoplay fails
            });
        }
    }

    document.addEventListener('DOMContentLoaded', tryAutoplay);
    playButton.addEventListener('click', () => {
        audio.muted = false;
        audio.play();
        playButton.style.display = "none";
    });

    document.addEventListener("visibilitychange", function() {
        if (document.hidden) {
            audio.pause();
        } else {
            tryAutoplay();
        }
    });
</script>
